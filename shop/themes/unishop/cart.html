{strip}
    <script src="{$wa_theme_url}cart.js"></script>

    {if $wa->get('ajax')}
        {include file="popup.cart.html" inline}
    {else if $wa->get('fixed')}
        {include file="fixed.cart.html" inline}
    {else}
        <div class="cols-1">
            <div class="content ">
                <div class="content-box">
                    {if !$cart.count}
                        <div class="cart">
                            <h1>[`Shopping cart`]</h1>
                            <p>[`Your shopping cart is empty.`]</p>
                        </div>
                    {else}
                        <form method="post">
                            <h1>[`Shopping cart`]</h1>
                            <div class="cart cart-page">
                                {foreach $cart.items as $item}
                                    <div class="row" data-id="{$item.id}">
                                        <div class="col cart-el_image">
                                            <a href="{$wa->shop->productUrl($item.product)}"
                                               title="{$item.product.name|escape}">
                                                {$wa->shop->productImgHtml($item.product, '100', ['default' => '/wa-data/public/shop/themes/unishop/img/dummy96.png'])}
                                            </a>&nbsp;
                                        </div>
                                        <div class="col cart-el_info">
                                            <a href="{$wa->shop->productUrl($item.product)}">{$item.product.name|escape}</a>
                                            {if isset($item.sku_name) && strlen($item.sku_name) && $item.sku_name != $item.product.name}
                                                <span class="cart-el_code bg-maincolor">{$item.sku_name|escape}</span>
                                            {/if}

                                            {if !empty($item.services)}
                                                <div class="col cart-el_services js-cart-services">
                                                    {foreach $item.services as $service_id => $s}
                                                        <div class="js-cart-service"
                                                             {if !empty($s.id)}data-id="{$s.id}"{/if}>
                                                            <label>
                                                                <input {if !empty($s.id)}checked{/if} type="checkbox"
                                                                       name="services[{$item.id}][]"
                                                                       value="{$service_id}"> {$s.name|escape} {if $s.price && !isset($s.variants)}(
                                                                    <span>+{shop_currency_html($s.price, $s.currency)}</span>
                                                                    ){/if}
                                                            </label>
                                                            {if isset($s.variants)}
                                                                <select name="service-option[{$item.id}][{$service_id}]"
                                                                        {if empty($s.id)}disabled{/if}>
                                                                    {foreach $s.variants as $variant_id => $v}
                                                                        <option {if $s.variant_id == $variant_id}selected{/if}
                                                                                value="{$variant_id}">{$v.name|escape}
                                                                            (+{shop_currency($v.price, $s.currency)})
                                                                        </option>
                                                                    {/foreach}
                                                                </select>
                                                            {else}
                                                                <input type="hidden"
                                                                       name="service-option[{$item.id}][{$service_id}]"
                                                                       value="{$s.variant_id}">
                                                            {/if}
                                                        </div>
                                                    {/foreach}
                                                </div>
                                            {/if}
                                        </div>

                                        <div class="col cart-el_right">
                                            <div class="col nowrap cart-el_qty">
                                            <span class="js-qty Cart__Qty align-center nowrap">
                                                <span data-type="-" class="js-qty-button Cart__Qty_act sdColor">-</span>
                                                <input type="text" name="quantity[{$item.id}]" value="{$item.quantity}"
                                                       class="js-number qty{if !empty($item.error)} error{/if}">
                                                <span data-type="+" class="js-qty-button Cart__Qty_act sdColor">+</span>
                                            </span>
                                            </div>

                                            <div data-zero-text="{$theme_settings.text_zero_price}"
                                                 class="col js-item-total cart-el_price nowrap">
                                                {if empty($item.full_price) && !empty($theme_settings.text_zero_price)}
                                                    {$theme_settings.text_zero_price}
                                                {else}
                                                    {shop_currency_html($item.full_price, true)}
                                                {/if}
                                            </div>

                                            <div class="col cart-el_remove">
                                                <i class="fa  fi-rr-cross-small icon js-cart-delete"></i>
                                            </div>
                                        </div>
                                    </div>
                                {if !empty($item.error)}
                                    <script>alert({json_encode($item.error)});</script>
                                {/if}
                                {/foreach}

                                <!-- discount -->
                                <div class="row cart-el_discount"
                                     {if !shopDiscounts::isEnabled('coupons') && !$discount}style="display:none"{/if}
                                     id="discount-row">
                                    <div class="col cart-el_coupon">
                                        {if !$coupon_code}
                                            <a href="#" class="link-style" id="coupon-in-stock">[`I have a coupon!`]</a>
                                        {/if}
                                        {if shopDiscounts::isEnabled('coupons')}
                                            <div {if !$coupon_code}style="display: none;"{/if} class="coupon-form"
                                                 id="use-coupon-code">

                                                <input placeholder="[`Coupon code`]" type="text" name="coupon_code"
                                                       value="{$coupon_code|escape}">
                                                <span class="cart-coupon-add-button fa  fi-rr-check js-btn-form sdColor"></span>
                                                {if $coupon_code && empty($coupon_discount) && empty($coupon_free_shipping)}
                                                    <div class="errormsg">[`Invalid coupon code`]</div>
                                                {/if}
                                            </div>
                                        {/if}
                                    </div>
                                    <div class="col cart-el_right">
                                        <div class="col cart-el_qty">[`Discount`]</div>
                                        <div class="col cart-discount nowrap cart-el_price">
                                            &minus; {shop_currency_html($discount, true)}</div>
                                    </div>

                                </div>

                                {if shopAffiliate::isEnabled() && $affiliate_bonus > 0}
                                    <div class="row">
                                        <div class="col cart-el_coupon">
                                            {sprintf('[`Your current affiliate bonus of %s points allows you to get an additonal discount of up to %s`]', $affiliate_bonus, "<span class=\"affiliate-discount-available\">{shop_currency_html($affiliate_discount)}</span>")}
                                            {if $use_affiliate}
                                                <span class="link-style" id="cancel-affiliate">[`Donâ€™t use bonus discount`]</span>
                                            {else}
                                                <span class="link-style" id="use-affiliate">[`Use bonus`]</span>
                                            {/if}
                                        </div>
                                        <div class="col cart-el_right">
                                            <div class="col cart-el_qty"></div>
                                            <div class="col cart-el_price affiliate-discount"{if $use_affiliate} data-use="1"{/if}>
                                                &minus; {if $use_affiliate}{shop_currency_html(shopAffiliate::convertBonus($used_affiliate_bonus))}{else}0{/if}</div>
                                        </div>
                                    </div>
                                {/if}


                                <div class="cart-price-total-box box-hlighted">
                                    <span class="cart-price-total-text">[`Total`]</span>
                                    <span class="cart-price-total nowrap price">{shop_currency_html($cart.total, true)}</span>
                                    <div class="cart-price-total-btn">
                                        <!-- plugin hook: 'frontend_cart' -->
                                        {* @event frontend_cart.%plugin_id% *}
                                        {foreach $frontend_cart as $_}{$_}{/foreach}


                                        {$_buy1click = class_exists('shopBuy1clickViewHelper') && $theme_settings.fastorder == "buy1click"}
                                        {if $_buy1click}
                                            {shopBuy1clickViewHelper::getCartButton()}
                                        {/if}

                                        <input name="checkout" type="submit" value="[`Proceed to checkout`]"
                                               class="button js-checkout-button-cart">
                                    </div>
                                </div>

                                {if shopAffiliate::isEnabled() && !empty($add_affiliate_bonus)}
                                    <div class="row border-none">
                                        <p class="affiliate">
                                            <i class="fa  fi-rr-thumbs-up icon" aria-hidden="true"></i>
                                            {sprintf("[`This order will add <strong>+%s bonuses</strong> to  your account, which you will be able to spend on getting additional discounts later.`]", $add_affiliate_bonus)}
                                        </p>
                                    </div>
                                {/if}
                            </div>
                        </form>
                    {/if}
                </div>

                {$related = $wa->shop->crossSelling($cart.items, 'product_id')}
                {if $theme_settings.cart_crossselling && $related}
                    <section class="related">
                        <div class="content-box">
                            <h3 class="product_cross-title">{sprintf('[`Customers who bought %s also bought`]', $item.product.name|escape)}
                                :</h3>
                        </div>

                        {if $wa->isMobile()}
                            {include file="list-thumbs-mini.html" products=$related ulclass=""}
                        {else}
                            {include file="list-thumbs.html" products=$related ulclass=""}
                        {/if}
                    </section>
                {/if}

            </div>
        </div>
    {/if}
{/strip}