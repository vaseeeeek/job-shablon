{if method_exists($wa->shop, 'checkout')}
    {$cartUrl = $wa->shop->checkout()->cartUrl()}
    {$checkoutUrl = $wa->shop->checkout()->url()}
{else}
    {$cartUrl = $wa->getUrl('shop/frontend/cart')}
    {$checkoutUrl = $wa->getUrl('shop/frontend/checkout')}
{/if}

<div id="cart-pr-list">
    <div class="js-cart-ajax header_cart-preview dd-wrap br-top-sdColor" data-url="{$wa->getUrl('shop/frontend/cart')}">
        <div class="header_cart-preview-empty js-header_cart-preview-empty" {if $cart.count > 0} style="display: none"{/if}>
            <h1>[`Shopping cart`]</h1>
            <p>[`Your shopping cart is empty.`]</p>
        </div>
        <div class="header_cart-preview-full js-header_cart-preview-full" {if !$cart.count} style="display: none"{/if}>
            <div class="header_cart-preview__products">
                {foreach $cart.items as $item}
                    <div class="js-cart-product header_cart-preview__product" data-id="{$item.id}">
                        <div class="header_cart-preview__product-img">
                            <a href="{$wa->shop->productUrl($item.product)}"
                               title="{$item.product.name|escape}">{$wa->shop->productImgHtml($item.product, '50', ['default' => $def_img])}</a>
                        </div>
                        <div class="header_cart-preview__product-info">
                            <a href="{$wa->shop->productUrl($item.product)}">{$item.product.name|escape}</a> <span
                                    class="hint nowrap">(&times; {$item.quantity})</span>
                            <div class="header_cart-preview__product-price js-cart-product-price">
                                {if empty($item.full_price) && !empty($theme_settings.text_zero_price)}
                                    {$theme_settings.text_zero_price}
                                {else}
                                    {shop_currency_html($item.full_price, true)}
                                {/if}
                            </div>
                        </div>
                        <div class="header_cart-preview__product-count">
                            <div class="header_cart-preview__product-remove"><span class="js-preview-cart-delete">&times;</span>
                            </div>
                        </div>
                    </div>
                {/foreach}
            </div>

            <div class="header_cart-preview__total">
                <span class="header_cart-preview__total-text">[`Total`]:</span> <span
                        class="js-cart-price-total price ">{shop_currency_html($cart.total, true)}</span>
            </div>
            {if method_exists($wa->shop, 'checkout') || $checkoutUrl == $cartUrl}
                <div class="header_cart-preview__buttons align-center">
                    <a class="button button-s" href="{$checkoutUrl}">[`Proceed to checkout`]</a>
                </div>
            {else}
                <div class="header_cart-preview__buttons">
                    <a href="{$cartUrl}">[`Cart`] &rarr;</a>
                    <a class="button button-s" href="{$checkoutUrl}">[`Proceed to checkout`]</a>
                </div>
            {/if}
        </div>
    </div>
</div>