{if method_exists($wa->shop, 'checkout')}
    {$cartUrl = $wa->shop->checkout()->cartUrl()}
    {$checkoutUrl = $wa->shop->checkout()->url()}
{else}
    {$cartUrl = $wa->getUrl('shop/frontend/cart')}
    {$checkoutUrl = $wa->getUrl('shop/frontend/checkout')}
{/if}

{if isset($cart.count) && $cart.count > 0}
    <div class="js-fixed-cart fixed-cart">
        <span class="fixed-cart__close js-cart-fixed-close maincolor">&times;</span>
        <div class="fixed-cart__head bs-bg">
            [`Products in cart`]
            {if $cartUrl != $checkoutUrl}
                <span class="fixed-cart__link-cart">
                    <a href="{$cartUrl}">[`To cart`]</a> â†’
                </span>
            {/if}
        </div>
        <div class="js-cart-ajax fixed-cart__items" data-url="{$wa->getUrl('shop/frontend/cart')}">
            {foreach $cart.items as $item}
                <div class="js-cart-product fixed-cart__item" data-product-id="{$item.product_id}" data-id="{$item.id}">
                    <div class="fixed-cart__img">
                        <a href="{$wa->shop->productUrl($item.product)}" title="{$item.product.name|escape}">
                            {$wa->shop->productImgHtml($item.product, '50', ['default' => '/wa-data/public/shop/themes/unishop/img/dummy96.png'])}
                        </a>
                    </div>
                    <div class="fixed-cart__info">
                        <a href="{$wa->shop->productUrl($item.product)}">{$item.product.name|escape}</a>
                        <div class="fixed-cart__price js-cart-product-price">
                            <span class="fixed-cart__qty js-qty Cart__Qty--mini Cart__Qty{if !empty($item.error)} error{/if}">
                                <span data-type="-" class="js-qty-button Cart__Qty_act">-</span>
                                <input type="text" name="quantity[{$item.id}]" value="{$item.quantity}" class="js-number qty">
                                <span data-type="+" class="js-qty-button Cart__Qty_act">+</span>
                            </span>

                            {$text_zero_price = $theme_settings.text_zero_price}
                            <span{if $text_zero_price} data-zero-text="{$text_zero_price}"{/if} class="js-item-total fixed-cart__price">
                                {if $text_zero_price && $item.full_price == 0}
                                    {$text_zero_price}
                                {else}
                                    {shop_currency_html($item.full_price, true)}
                                {/if}
                            </span>
                            <span class="fixed-cart__remove js-preview-cart-delete">&times;</span>
                        </div>
                    </div>
                </div>
            {/foreach}
        </div>
        <div class="fixed-cart__bottom">

            <div class="fixed-cart__total-outer">
                <div class="fixed-cart__total-prices">
                    <div class="fixed-cart__discount">
                        <span class="fixed-cart__discount-title">[`Discount`]:</span>
                        <span class="cart-discount">&minus; {shop_currency_html($discount, true)}</span>
                    </div>
                    <div class="fixed-cart__total">
                        <span class="fixed-cart__total-amount-text">[`Total`]:</span>
                        <span class="cart-price-total">{shop_currency_html($cart.total, true)}</span>
                    </div>
                </div>
                <a class="fixed-cart__checkout button" href="{$checkoutUrl}">
                    [`Proceed to checkout`]
                </a>
            </div>
        </div>
    </div>
    <div class="js-cart-fixed-close m-bg"></div>
{/if}
