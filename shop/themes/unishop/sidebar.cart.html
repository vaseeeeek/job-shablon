{if method_exists($wa->shop, 'checkout')}
    {$cartUrl = $wa->shop->checkout()->cartUrl()}
{else}
    {$cartUrl = $wa->getUrl('shop/frontend/cart')}
{/if}
{$items = $wa->shop->cart->items()}

{$default_image = "`$wa_theme_url`img/dummy48.png"}
{if !empty($theme_settings.default_image)}
    {$default_image = "`$wa_parent_theme_url``$theme_settings.default_image`"}
{/if}

{if count($items)}
    <div class="aside-wrap sidebar-views">
        <div class="aside-wrap_head bs-color">[`Composition of order`]</div>
        {foreach $items as $item}
            <div class="cart-mini__product">
                <div class="cart-mini__product-img">
                    <a href="{$wa->shop->productUrl($item.product)}" title="{$item.product.name|escape}">{$wa->shop->productImgHtml($item.product, '50', ['default' => $default_image])}</a>
                </div>
                <div class="cart-mini__product-info">
                    <a href="{$wa->shop->productUrl($item.product)}">{$item.product.name|escape}</a>
                    <div class="cart-mini__product-price">
                        {$product_price = (int) $item.price}
                        {if empty($product_price) && !empty($theme_settings.text_price_zero)}
                            {$theme_settings.text_price_zero}
                        {else}
                            {shop_currency_html($item.price, true)}
                        {/if}
                        <span class="hint nowrap">x {$item.quantity}</span>
                    </div>
                </div>
            </div>
        {/foreach}
        <div class="aside-wrap_bottom sd-color">
            <a href="{$cartUrl}">[`Edit the order`]</a> &rarr;
        </div>
    </div>
{/if}