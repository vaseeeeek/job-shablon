{strip}
{if count($category.subcategories) > 0}
    {$_subcat_filter_save = $theme_settings.save_subcat_filter}
    {$subcategory_filter_aliases = $theme_settings.cat_save_filter_alias_subcat}

    <div class="js-cat_sub"{if $_subcat_filter_save} data-save-filters="true"{if $subcategory_filter_aliases} data-save-filters-aliases="{$subcategory_filter_aliases}"{/if}{/if}>
        {if isset($category.params.sub_view) && !empty($category.params.sub_view)}
            {$sub_view = $category.params.sub_view}
        {/if}

        {if class_exists('shopSkcatimagePlugin')}
            {$skImages = shopSkcatimageHelper::getImages()}
        {elseif class_exists('shopWmimageincatPlugin')}
            {$Wmimages = shopWmimageincatPlugin::getCategoryImageObj()}
        {/if}
        <!-- Спросить о настройке -->
        {if !$products}
            {if !isset($sub_view)}
                {$sub_view = $theme_settings.cat_view_subs_no_products}
            {/if}
            {if $sub_view == 'image'}
                {include file="categories.tile.html" categories=$category.subcategories}
            {else if $sub_view == 'icon'}
                {include file="category.subs.icons.html"}
            {else}
                {include file="category.subs.noimage.html"}
            {/if}
         {else}
            {if !isset($sub_view)}
                {$sub_view = $theme_settings.category_view_subs_not_empty_products}
            {/if}
            {if $sub_view == 'image'}
                {include file="categories.tile.html" categories=$category.subcategories}
            {else if $sub_view == 'icon'}
                {include file="category.subs.icons.html"}
            {else}
                {include file="category.subs.noimage.html"}
            {/if}
        {/if}
    </div>
{/if}
{/strip}