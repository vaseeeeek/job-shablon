{strip}
{if !empty($theme_settings.homepage_brands) && class_exists('shopProductbrandsPlugin')}
    {$brands = []}
    {$allBrands = shopProductbrandsPlugin::getBrands()}
    {if $theme_settings.homepage_brands == 'all'}
        {$brands = $allBrands}
    {else}
        {foreach $allBrands as $b}
            {if isset($b.params.home) && !empty($b.params.home)}
                {$brands[] = $b}
            {/if}
        {/foreach}
    {/if}

    {if count($brands) > 0}
        {if $theme_settings.homepage_brands_type == 'with_header'}
            <div class="brands-mainpage-head">
                <div class="brands-mainpage-head__inner">[`Our brands`]
                    <div class="all_brands maincolor">
                        <a href="{$wa->getUrl('shop/frontend/brands')}">[`All brands`]</a> â†’
                    </div>
                </div>
            </div>
        {/if}
        <div class="js-brands-carousel brands-mainpage margin-bottom">
            <div class="js-brands-mainpage-direction"></div>
            <div class="owl-carousel">
                {foreach $brands as $b}
                    <div class="brands-mainpage_el js-brands-mainpage-el">
                        <a title="{$b.name}" href="{$b.url}">
                            {if $b.image}
                                {if $theme_settings.brands_list_images_lazy}
                                    <img alt="{$b.name}" class="owl-lazy" src="{$wa_theme_url}img/lazy-image.png" data-src="{$wa_url}wa-data/public/shop/brands/{$b.id}/{$b.id}.200{$b.image}">
                                {else}
                                    <img alt="{$b.name}" src="{$wa_url}wa-data/public/shop/brands/{$b.id}/{$b.id}.200{$b.image}">
                                {/if}
                            {else}
                                {$b.name}
                            {/if}
                        </a>
                    </div>
                {/foreach}
            </div>
        </div>
    {/if}
{/if}
{/strip}