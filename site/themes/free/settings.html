{strip}
{$settings = $theme_settings_config}
{$default_theme_settings = $theme_settings}
{if $settings}
    {foreach from=$theme_settings key=name item=setting}
        {$cookieSettings = $wa->cookie($name)}
        {if $cookieSettings && $cookieSettings != 'null'}
            {$theme_settings.$name = $cookieSettings}
        {/if}
    {/foreach}

    <a id="open-test-settings"  class="btn-settings" href="#test-settings">
    </a>
    <div class="popup-content popup-content--settings mfp-hide" id="test-settings">
        <form method="post" id="settings-form">
            <div class="clearfix settings-header">
                <div class="settings-head">[`Settings theme`]</div>

                <div class="settings-save">
                    <span class="js-clear-test-settings settings-save__clear link-half">[`Clear`]</span>
                    <input type="submit" value="[`Save`]" />
                </div>
            </div>
            {foreach from=$settings key=name item=setting}
                {$show_setting = false}
                {$settings_array = [
                    "color_scheme" => true,
                    "base_color" => true,
                    "bg_color_navogation" => true,
                    "second_color" => true,
                    "body_bg" => true,
                    "homepage_bxslider_mode" => true,
                    "homepage_product_view" => true,
                    "font" => true
                ]}
                {if $setting.control_type == 'color' || $setting.control_type == 'radio' || $setting.control_type == 'select' || $setting.control_type == 'image_select' || $setting.control_type == 'checkbox' || $setting.control_type == 'group_divider'}
                    {if !empty($settings_array[$name])}
                        {$show_setting = true}
                    {/if}
                {/if}
                {if $show_setting}
                    {if $setting.control_type == 'checkbox'}
                        <div class="settings-list">
                            <label>
                                <input type="checkbox" name="{$name}" value="1" {if $theme_settings[$name] == 1}checked{/if}>
                                {$setting.name}
                            </label>
                        </div>
                    {else}
                        <div class="setting-title">{$setting.name}</div>
                        <div class="settings-list">
                            {if $setting.control_type == 'radio'}
                                {foreach from=$setting.options key=key item=option}
                                    {if !$key|strstr:'_google_'}
                                        <div class="settings__el">
                                            <label class="label">
                                                <input type="radio" name="{$name}" value="{$key}" {if $theme_settings[$name] == {$key}}checked{/if}>
                                                <span class="label-text">{$option.name}</span>
                                            </label>
                                        </div>
                                    {/if}
                                {/foreach}
                            {elseif $setting.control_type == 'select'}
                                {foreach from=$setting.options key=key item=option}
                                    {if !$key|strstr:'_google_'}
                                        <div class="settings__el">
                                            <label class="label">
                                                <input type="radio" name="{$name}" value="{$key}" {if $theme_settings[$name] == {$key}}checked{/if}>
                                                <span class="label-text">{$option}</span>
                                            </label>
                                        </div>
                                    {/if}
                                {/foreach}
                            {elseif $setting.control_type == 'color'}
                                <div class="settings__el">
                                    <input class="js-color settings__el-color" type="color" id="setting_{$name}" name="{$name}" value="{if empty($theme_settings[$name])}#ffffff{else}{$theme_settings[$name]}{/if}" />
                                    <span data-id="setting_{$name}" class="js-color-select filter-reset icon-before">[`Clear`]</span>
                                </div>
                            {elseif $setting.control_type == 'image_select'}
                                {foreach from=$setting.options key=key item=option}
                                    {$html_class = str_replace('img/themesettings/','',str_replace('.png','',$key))}
                                    {$is_active = ($theme_settings[$name] == $html_class)}
                                    <div class="js-select-setting-color settings__el settings__el--color{if !empty($is_active)} selected{/if}" data-value="{$html_class}">
                                            <img src="{$wa_theme_url}{$key}" alt="">
                                    </div>
                                {/foreach}
                                <input class="js-setting-color" name="{$name}" value="{if isset($theme_settings[$name])}{$theme_settings[$name]}{/if}" type="hidden" />
                            {/if}
                        </div>
                    {/if}
                {/if}
            {/foreach}
            <div class="clearfix settings-footer">
                <a href="https://www.webasyst.ru/store/theme/unishop/" target="_blank" class="button buy-theme">[`Buy theme`]</a>
                <div class="settings-save">
                    <span class="js-clear-test-settings settings-save__clear link-half">[`Clear`]</span>
                    <input type="submit" value="[`Save`]" />
                </div>
            </div>
        </form>
    </div>
{/if}
{/strip}
