{strip}
<!-- Спросить о настройке -->
{$is_mobile = ($wa->isMobile() && ($wa->cookie("is_desktop_for_mobile") != 1 || !$theme_settings.switch_version))}

{$isButtonSeoRegionsPlugin = (!$wa->isMobile() && $wa->shop && $theme_settings.use_region_plugin == 'seo_regions' && class_exists('shopRegionsViewHelper'))}
{$isButtonCitySelectPlugin = (!$wa->isMobile() && $wa->shop && $theme_settings.use_region_plugin == 'cityselect' && class_exists('shopCityselectPlugin'))}

<div class="header-top">
    <div class="container">
        

        {if class_exists(shopPushHelper)}
            {shopPushHelper::getButton()}
        {/if}

        {if $is_mobile}
            {include file="header.top.menu-mobile.html"}
        {else}
            {include file="header.top.menu-desktop.html"}
        {/if}
        <div class="header-top__right">

            {if $isButtonSeoRegionsPlugin}
                <div class="header-top_region">{shopRegionsViewHelper::getWindow()}</div>
            {else if $isButtonCitySelectPlugin}
                <div class="header-top_region">{shopCityselectPlugin::showCity('0')}</div>
            {/if}

            {if $wa_app == 'shop' && $theme_settings.currency_toggle}
                {$currencies = $wa->shop->currencies()}
                {$currency = $wa->shop->currency()}
                {if count($currencies) > 1}
                    <div class="header_currency js-drop-down-outer">
                        {if count($currencies) > 1}
                        [`Currency`]:
                        <span data-id="currency-list" class="js-btn-drop-down currency_item icon-after">
                            {if !empty($theme_settings.show_currency_flag)}
                                <img src="{$wa_theme_url}img/currency/{$currency}.png" alt="{$currency}" />
                            {/if}
                            {$currency}
                        </span>
                        <div id="currency-list" class="js-drop-down-wrap currency_list">
                            <div class="drop-down-wrap br-top-sd-color">
                                {foreach $currencies as $c_code => $c}
                                <span data-value="{$c_code}" class="js-currency currency_item{if $c_code == $currency} bs-color{/if}">
                                    {if !empty($theme_settings.show_currency_flag)}
                                        <img src="{$wa_theme_url}img/currency/{$c_code}.png" alt="{$c_code}" />
                                    {/if}
                                    {$c_code}
                                </span>
                                {/foreach}
                            </div>
                        </div>
                        <script>
                            $(".js-currency").click(function () {
                                var url = location.href;
                                if (url.indexOf('?') == -1) {
                                    url += '?';
                                } else {
                                    url += '&';
                                }
                                location.href = url + 'currency=' + $(this).data("value");
                            });
                        </script>
                        {/if}
                    </div>
                {/if}
            {/if}

            {if $wa_app == 'shop' && $theme_settings.language_toggle}
                <div class="header_lang">
                    <span  class="header_lang-ttl">[`Language`]:</span>
                    {foreach waLocale::getAll('name') as $language => $lang_name}
                        {$language_text = $language|regex_replace:"/[a-z_]/":""}
                        {if $wa->locale() == $language}
                            <span class="header_lang-el">{$language_text}</span>
                        {else}
                            <a class="js-language header_lang-el" data-value="{$language}" href="{$language}">{$language_text}</a>
                        {/if}
                    {/foreach}
                </div>
            {/if}
        </div>
    </div>
</div>
{/strip}
