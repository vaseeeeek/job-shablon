{strip}
{$is_mobile = $wa->isMobile()}
{* проверить работу плагина *}
{$headButtonSeoRegionsPlugin = (!$wa->isMobile() && $wa->shop && $theme_settings.region_plugin == 'seo_regions' && class_exists('shopRegionsViewHelper'))}
{$headButtonCitySelectPlugin = (!$wa->isMobile() && $wa->shop && $theme_settings.region_plugin == 'cityselect' && class_exists('shopCityselectPlugin'))}

<div class="header-top--links">
    <div class="container">
        {if $is_mobile}
            {include file="header.top.menu-mobile.html"}
        {else}
            {include file="header.top.menu-desktop.html"}
        {/if}
        <div class="header-top--right">

            {if $headButtonSeoRegionsPlugin}
                <div class="header-top_region">{shopRegionsViewHelper::getWindow()}</div>
            {elseif $headButtonCitySelectPlugin}
                <div class="header-top_region">{shopCityselectPlugin::showCity('0')}</div>
            {/if}

            {if $wa_app == 'shop' && $theme_settings.currency_toggle}
                {$currencies = $wa->shop->currencies()}
                {$currency = $wa->shop->currency()}
                {if count($currencies) > 1}
                    <div class="header_currency js-dd-outer">
                        {if count($currencies) > 1}
                            [`Currency`]:
                            <span data-id="currency-list" class="js-btnDrop-down currency_item fa-icon-after">
                            {if !empty($theme_settings.show_currency_flag)}
                                <img src="{$wa_theme_url}img/currency/{$currency}.png" alt="{$currency}" />
                            {/if}
                                {$currency}
                        </span>
                            <div id="currency-list" class="js-dd-wrap currency_list">
                                <div class="dd-wrap br-top-sdСolor">
                                    {foreach $currencies as $c_code => $c}
                                        <span data-value="{$c_code}" class="js-currency currency_item{if $c_code == $currency} maincolor{/if}">
                                    {if !empty($theme_settings.show_currency_flag)}
                                        <img src="{$wa_theme_url}img/currency/{$c_code}.png" alt="{$c_code}" />
                                    {/if}
                                            {$c_code}
                                </span>
                                    {/foreach}
                                </div>
                            </div>
                            <script>
                                $(".js-currency").click(function () {
                                    var url = location.href;
                                    if (url.indexOf('?') == -1) {
                                        url += '?';
                                    } else {
                                        url += '&';
                                    }
                                    location.href = url + 'currency=' + $(this).data("value");
                                });
                            </script>
                        {/if}
                    </div>
                {/if}
            {/if}

            {if $wa_app == 'shop' && $theme_settings.language_toggle}
                <div class="header_lang">
                    <span  class="header_lang-ttl">[`Language`]:</span>
                    {foreach waLocale::getAll('name') as $language => $lang_name}
                        {$language_text = $language|regex_replace:"/[a-z_]/":""}
                        {if $wa->locale() == $language}
                            <span class="header_lang-el">{$language_text}</span>
                        {else}
                            <a class="js-language header_lang-el" data-value="{$language}" href="{$language}">{$language_text}</a>
                        {/if}
                    {/foreach}
                </div>
            {/if}

            {if $wa->isAuthEnabled()}
                <div class="header_login">
                    {if $wa->user()->isAuth()}
                        {if $wa->myUrl()}
                            <div class="header_login-content">
                                <div class="header_login__profile">
                                    <a href="{$wa->myUrl()}" {if $wa->globals('isMyAccount')}class="selected"{/if}>{$wa->user('firstname')|default:'[`My account`]'}</a>
                                </div>
                                <div class="header_login-logout">
                                    <i class="fa fa-sign-out icon" aria-hidden="true"></i>
                                    <a href="?logout">[s`Log out`]</a>
                                </div>
                            </div>
                        {else}
                            <div class="header_login-content">
                                {$wa->user('firstname')|default:'[`My account`]'}
                                <div class="header_login-logout">
                                    <i class="fa fa-sign-out icon" aria-hidden="true"></i>
                                    <a href="?logout">[s`Log out`]</a>
                                </div>
                            </div>
                        {/if}
                    {else}
                        <div class="header_login-content">
                            <div class="header_login-sign">
                                <i class="fa fa-sign-in icon" aria-hidden="true"></i>
                                <a class="{if $theme_settings.auth_popup} js-form-login-popupp{/if}" href="{$wa->loginUrl()}">[s`Log in`]</a>
                            </div>
                            <a href="{$wa->signupUrl()}">[s`Sign up`]</a>
                        </div>
                    {/if}
                </div>
            {/if}
        </div>
    </div>
</div>
{/strip}

