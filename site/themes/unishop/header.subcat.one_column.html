{strip}
<div class="menu-subcategory js-subcategorymenu">
    {foreach $cat.childs as $keyCatChild => $catChild_2}
        {if !isset($catChild_2.params.menu_hide)}
            {$_subcat_lvl2 = false}
            {if count($catChild_2.childs) && $theme_settings.max_cat_lvl > 2}
                {foreach $catChild_2.childs as $catChild_3}
                    {if !isset($catChild_3.params.menu_hide)}
                        {$_subcat_lvl2 = true}
                    {/if}
                {/foreach}
            {/if}
            <div class="{if $_subcat_lvl2}js-subcatmenu-el has-subs{/if} subcat-menu__el{if $theme_settings.cat_menu_dd_relative == "parent"} pos-rel {/if}">
                {if $_subcat_lvl2}
                    <i class="js-cat-el-caret fi-rr-angle-small-right fa"></i>
                {/if}

                <a href="{$catChild_2.url}">{$catChild_2.name}</a>
                {if $_subcat_lvl2}
                    <div class="menu-subcategory js-subcategorymenu">
                        {foreach $catChild_2.childs as $catChild_3}
                            {if !isset($catChild_3.params.menu_hide)}
                                <div class="subcat-menu__el">
                                    <a href="{$catChild_3.url}">{$catChild_3.name}</a>
                                </div>
                            {/if}
                        {/foreach}
                    </div>
                {/if}
            </div>
        {/if}
    {/foreach}
</div>
{/strip}